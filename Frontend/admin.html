<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tracking Frontend</title>
  <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.2.7-rc.0/web3.min.js"></script>
  <script language="javascript" type="text/javascript" src="tracking_abi.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>


<body onload="dApp.showAddress()">
<!-- <body> -->
  <nav class="navbar navbar-expand-sm" style="background:rgb(5,45,71)">
	  <div class="container-fluid">	    
		<div class="collapse navbar-collapse " id="navbarSupportedContent">
		  <div class="mx-auto">
			<!-- <a class="navbar-brand " href="#">Navbar</a> -->
      <img src="../Images/Blockchain-and-logistics.jpg" alt="" width="300" class="img-fluid">
		</div>
    <a class="nav-link pt-xl-5" onclick="dApp.logout()"  tabindex="-1">Logout</a>
		</div>
	  </div>
	</nav>
  <div class="m-3 p-3">
    <h4 class="p-3">Welcome Admin <span id="userAddress"></span></h4>
  
    <div class="container m-3 p-3">
      <div class="row">
        <div class="col-sm-3">
          <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action" id="addCourier" onclick="dApp.addCourierStyle()"> Add Couriers </a>
            <a href="#" class="list-group-item list-group-item-action" id="viewCourier" onclick="dApp.viewCourierStyle()">View Couriers</a>

            <a href="#" class="list-group-item list-group-item-action" id="addCustomer" onclick="dApp.addCustomerStyle()">Add Customers</a>
            <a href="#" class="list-group-item list-group-item-action" id="viewCustomer" onclick="dApp.viewCustomerStyle()">View Customers</a>

            <a href="#" class="list-group-item list-group-item-action" id="addParcel" onclick="dApp.addParcelStyle()">Add Parcels</a>
            <a href="#" class="list-group-item list-group-item-action" id="viewParcel" onclick="dApp.viewParcelStyle()">View Parcel</a>

            <a href="#" class="list-group-item list-group-item-action" id="registerParcel" onclick="dApp.registerParcelStyle()">Register Parcel</a>
            <a href="#" class="list-group-item list-group-item-action" id="updateTracking" onclick="dApp.updateTrackingStyle()">Update Tracking</a>
            <a href="#" class="list-group-item list-group-item-action" id="trackParcel" onclick="dApp.trackParcelStyle()">Track Parcel</a>
          </div>
        </div>

        <div class="col collapse" id="addCourierContent">
          <h1 class="mb-3 pb-3">Add Couriers</h1> 
          <form class="m-3 p-3">
            <div class="mb-3">
              <label for="addCourierLabel" class="form-label">Courier Address</label>
              <input type="text" class="form-control" id="addCourierLabel" aria-describedby="emailHelp">
              <div class="form-text mt-2">Enter the courier address you would like to add.</div>
            </div>
            <button type="submit" class="btn btn-primary" onclick=dApp.addCourier()>Add Courier</button>
            <div class="form-text mt-2" id="addCourierResponse"></div>
          </form>
        </div>


        <div class="col collapse" id="viewCourierContent">
          <h1 class="mb-3 pb-3">View Couriers</h1> 
          <table class="table m-3 p-3" id="viewCourierTable">
            <thead>
              <tr class="table-dark"> 
                <td>ID</td> <td>Address</td> 
              </tr>
            </thead>
          </table>
        </div>

        <div class="col collapse" id="addCustomerContent">
          <h1 class="mb-3 pb-3">Add Customers</h1> 
          <form class="m-3 p-3">
            <div class="mb-3">
              <label for="addCustomerLabel" class="form-label">Customer Address</label>
              <input type="text" class="form-control" id="addCustomerLabel" aria-describedby="emailHelp">
              <div class="form-text mt-2">Enter the customer address you would like to add.</div>
            </div>
            <button type="submit" class="btn btn-primary" onclick=dApp.addCustomer()>Add Customer</button>
            <div class="form-text mt-2" id="addCustomerResponse"></div>
          </form>
        </div>

        <div class="col collapse" id="viewCustomerContent">
          <h1 class="mb-3 pb-3">View Customers</h1>
          <table class="table m-3 p-3" id="viewCustomerTable">
            <thead>
              <tr class="table-dark"> 
                <td>ID</td> <td>Address</td> 
              </tr>
            </thead>
          </table>

        </div>

        <div class="col collapse" id="addParcelContent">
          <h1 class="mb-3 pb-3">Add Parcel</h1> 

        </div>

        <div class="col collapse" id="viewParcelContent">
          <h1 class="mb-3 pb-3">View Parcel</h1> 

        </div>

        <div class="col collapse" id="registerParcelContent">
          <h1 class="mb-3 pb-3">Register Parcel</h1> 

        </div>

        <div class="col collapse" id="updateTrackingContent">
          <h1 class="mb-3 pb-3">Update Tracking</h1> 

        </div>

        <div class="col collapse" id="trackParcelContent">
          <h1 class="mb-3 pb-3">Track Parcel</h1> 

        </div>






      </div>

    </div>  
  </div>


  <script language="javascript" type="text/javascript" src="functions.js"></script>
  <!-- <script>
    window.userAddress = null;
    window.onload = async () => {
      // Init Web3 connected to ETH network
      if (window.ethereum) {
        window.web3 = new Web3(window.ethereum);
      } else {
        alert("No ETH brower extension detected.");
      }

      // Load in Localstore key
      window.userAddress = window.localStorage.getItem("userAddress");
      //showAddress();
    };

document.getElementById(
        "userAddress"
      ).innerText = `${(window.userAddress)}`;
      document.getElementById("logoutButton").classList.remove("hidden");
      
    // Display or remove the users know address on the frontend
    function showAddress() {
      if (!window.userAddress) {
        document.getElementById("userAddress").innerText = "";
        document.getElementById("logoutButton").classList.add("hidden");
        return false;
      }

      document.getElementById(
        "userAddress"
      ).innerText = `ETH Address: ${(window.userAddress)}`;
      document.getElementById("logoutButton").classList.remove("hidden");
    }

    function addCourier(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }

    function viewCourier(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }

    function addCustomer(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }
    function viewCustomer(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }
    function addParcel(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }
    function viewParcel(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }
    function registerParcel(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }
    function updateTracking(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action active");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action");
    }
    function trackParcel(){
      document.getElementById('addCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCourier').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewCustomer').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('addParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('viewParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('registerParcel').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('updateTracking').setAttribute("class", "list-group-item list-group-item-action");
      document.getElementById('trackParcel').setAttribute("class", "list-group-item list-group-item-action active");
    }



    

    // remove stored user address and reset frontend
    function logout() {
      window.userAddress = null;
      window.localStorage.removeItem("userAddress");
      landingPage();
    }
    function landingPage(){
      window.location.href = 'index.html';
    }

    function adminPage(){
      window.location.href = 'admin.html';
    }

    function courierPage(){
      window.location.href = 'courier.html';
    }

    function customerPage(){
      window.location.href = 'customer.html';
    }

    function accountNotFound(){
      document.getElementById("userAddress").innerText = "This address was not found in the contract, Try again!";
    }

    // Login with Web3 via Metamasks window.ethereum library
    async function loginWithEth() {
      if (window.web3) {
        try {
          // We use this since ethereum.enable() is deprecated. This method is not
          // available in Web3JS - so we call it directly from metamasks' library
          const selectedAccount = await window.ethereum
            .request({
              method: "eth_requestAccounts",
            })
            .then((accounts) => accounts[0])
            .catch(() => {
              throw Error("No account selected!");
            });
          window.userAddress = selectedAccount;
          window.localStorage.setItem("userAddress", selectedAccount);
          // showAddress();
          adminPage()
        } catch (error) {
          console.error(error);
        }
      } else {
        alert("No ETH brower extension detected.");
      }
    }
    </script> -->
</body>


</html>

<!---
https://www.youtube.com/watch?v=6Pyk9wbm1g4&ab_channel=ChrisAtMachine
--> 